# 2.2.6 Cycle 6

### Design <a href="#design" id="design"></a>

In this cycle I implemented a new python library to more efficiently and easily implement my python script into the html page. In addition to this I also redisgned the html page into a more simple form. This was to move the development process more in line with the time before my deadline.

#### Objectives <a href="#objectives" id="objectives"></a>

* [ ] Post data to the python file
* [ ] Return the user input to the html file

#### Usability Features <a href="#usability-features" id="usability-features"></a>

No usability features are added in this cycle.

#### Key Variables <a href="#key-variables" id="key-variables"></a>

The following variables are from the html:

| Variable Name      | Input Type | Label                        |
| ------------------ | ---------- | ---------------------------- |
| stock\_name        | text       | Stock Name                   |
| investment         | number     | Investment amount            |
| start\_date        | number     | Start Date                   |
| confirm\_liability | text       | Please confirm you are aware |

The following variables are from the python file:

| Variable Name | Data Type |
| ------------- | --------- |
| stock\_name   | string    |
| investment    | float     |
| start\_date   | integer   |

#### Pseudocode <a href="#pseudocode" id="pseudocode"></a>

This is the pseudocode for the python file

```
Initialize Flask application with the name of the current module

Define route for the home page ("/") and another route ("/home")
    Define function 'home' to handle requests to these routes
        Return the rendered 'index.html' template

Define route for the result page ("/result") to handle both POST and GET requests
    Define function 'result' to handle requests to this route
        Convert form data from the request to a dictionary and store it in 'output'

        Extract 'stock_name' from 'output' and store it in 'stock_name'
        Extract 'investment' from 'output', convert it to a float, and store it in 'investment'
        Extract 'start_date' from 'output', convert it to an integer, and store it in 'start_date'
Return the rendered 'index.html' template with the following variables:
    'stock_name' set to the value of 'stock_name'
    'investment' set to the value of 'investment'
    'start_date' set to the value of 'start_date'

```

### Development <a href="#development" id="development"></a>

This pathway shift was quite successful. The html file was fairly easy to redesign and sending the data to the python file was also fairly simple. However there were a few problems in returning the data to the html file.

````python
```python
from flask import Flask, render_template, request

app = Flask(__name__)


@app.route("/")
@app.route("/home")
def home():
    return render_template("index.html")


@app.route("/result", methods=["POST", "GET"])
def result():
    output = request.form.to_dict()

    stock_name = output["stock_name"]
    investment = float(output["investment"])
    start_date = int(output["start_date"])

    return render_template("index.html", stock_name=stock_name, investment=investment, start_date=start_date)
```
````

The strategy, represented by the Strategy class, logs related messages and makes buy/sell decisions based on certain conditions. In the `notify_order` method, it tracks the status of trading orders, logs executed orders, and handles cancellations or rejections. The `next` method, called for each new data point, logs closing prices and checks if conditions are met to execute buy orders when the current close is lower than the previous two closes or sell orders when a position is held for at least five bars.

#### Challenges <a href="#challenges" id="challenges"></a>

The main challenge was finding a suitable strategy to use. Creating my own strategy was off the table because I don't have the time or the mathematical skill to come up with on. I did, however, find a recommended strategy off the Backtrader website. It is simple, however it makes a profit and allows me to focus on testing instead of finding and implementing a complex strategy.&#x20;

### Testing <a href="#testing" id="testing"></a>

#### Tests <a href="#tests" id="tests"></a>

| Test | Instructions | What I expect                        | What actually happens | Pass/Fail |
| ---- | ------------ | ------------------------------------ | --------------------- | --------- |
| 1    | Run code     | The program makes by and sell orders | As expected           | Pass      |
| 2    | Run code     | The algorithm makes a profit         | As expected           | Pass      |

#### Evidence <a href="#evidence" id="evidence"></a>

<figure><img src="../.gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (8).png" alt=""><figcaption><p>Log messages</p></figcaption></figure>
